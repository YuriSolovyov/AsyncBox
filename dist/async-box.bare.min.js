(function(){var e=function(f,g){var e=function(){var e=new Map,h=new Map,l=function(a){if(e.has(a)||h.has(a))throw Error("Handler for "+a+" request is already set");},k=function(a,c){var b=c.get(a);if(b)return b;throw Error("No handler found for "+a+" request");},m=function(a,c,b){return new f(function(a){a(c.apply(null,b.slice(1)))})};g(this);this.respondAsync=function(a,c){l(a);e.set(a,c)};this.respondSync=function(a,c){l(a);h.set(a,c)};this.requestAsync=function(a){for(var c=k(a,e),b=Array(arguments.length),
d=0;d<arguments.length;++d)b[d]=arguments[d];return m(a,c,b)};this.requestSync=function(a){for(var c=k(a,h),b=Array(arguments.length),d=0;d<arguments.length;++d)b[d]=arguments[d];return c.apply(null,b.slice(1))};this.requestAllAsync=function(a){return f.map(a,function(a){var b=a[0],d=k(b,e);return m(b,d,a)}).all()};this.requestAllSync=function(a){return a.map(function(a){return k(a[0],h).apply(null,a.slice(1))})}};e.prototype=Object.create(g.prototype);return e};"function"===typeof this.define&&this.define.amd?
this.define("async-box",["bluebird","wolfy87-eventemitter"],function(f,g){return e(f,g)}):"undefined"!==typeof module&&module.exports&&(module.exports=e(require("bluebird"),require("wolfy87-eventemitter")))})();
