(function(f){f(function(e,f,n){var h=e("bluebird"),k=e("wolfy87-eventemitter");e=function(){var e=new Map,f=new Map;new k;var l=function(a){if(e.has(a)||f.has(a))throw Error("Handler for "+a+" request is already set");},g=function(a,c){var b=c.get(a);if(b)return b;throw Error("No handler found for "+a+" request");},m=function(a,c,b){return new h(function(a){a(c.apply(null,b.slice(1)))})};this.respondAsync=function(a,c){l(a);e.set(a,c)};this.respondSync=function(a,c){l(a);f.set(a,c)};this.requestAsync=
function(a){for(var c=g(a,e),b=Array(arguments.length),d=0;d<arguments.length;++d)b[d]=arguments[d];return m(a,c,b)};this.requestSync=function(a){for(var c=g(a,f),b=Array(arguments.length),d=0;d<arguments.length;++d)b[d]=arguments[d];return c.apply(null,b.slice(1))};this.requestAllAsync=function(a){return h.map(a,function(a){var b=a[0],d=g(b,e);return m(b,d,a)})};this.requestAllSync=function(a,c){var b=c&&!0===c.spread,d=a.map(function(a){return g(a[0],f).apply(null,a.slice(1))});return b?d.spread():
d}};e.prototype=Object.create(k.prototype);return e})})("object"===typeof module&&module.exports&&"function"!==typeof define?function(f){module.exports=f(require,exports,module)}:define);